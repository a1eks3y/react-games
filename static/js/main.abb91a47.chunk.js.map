{"version":3,"sources":["SnakeCell/SnakeCell.jsx","App.js","index.js"],"names":["SnakeCell","x","y","className","style","marginTop","marginLeft","App","useState","score","setScore","GameOver","setGameOver","pause","setPause","JSON","stringify","snake","setSnake","Math","floor","random","apple","setApple","mainDirection","setMainDirection","direction","changeDirection","e","snakeArr","parse","code","length","useEffect","document","addEventListener","Promise","setTimeout","directNow","lastElem","push","appleAte","crash","forEach","el","i","arr","shift","prev","window","removeEventListener","timedelay","cursor","onClick","height","color","alignContent","display","justifyContent","fontSize","map","position","right","top","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.abb91a47.chunk.js","sourcesContent":["import React from 'react';\r\nimport './SnakeCell.css'\r\n\r\nconst SnakeCell = ({x, y}) => {\r\n    return (\r\n        <div className='snakeCell' style={{marginTop: (y-1)*20 + 'px', marginLeft: (x-1)*20 + 'px'}}>\r\n            <div className='CellBG'/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SnakeCell;","import React, {useEffect, useState} from 'react';\r\nimport './App.css'\r\nimport SnakeCell from \"./SnakeCell/SnakeCell\";\r\n\r\nconst App = () => { //37x23 [[1, 2] [3, 1]\r\n    const [score, setScore] = useState(0)\r\n    const [GameOver, setGameOver] = useState(false)\r\n    const [pause, setPause] = useState(true)\r\n    const [snake, setSnake] = useState(JSON.stringify([[1, 12], [2, 12], [3, 12]])) //[x,y]\r\n    const [apple, setApple] = useState(JSON.stringify([Math.floor(Math.random() * 33 + 4), Math.floor(Math.random() * 22 + 1)]))\r\n    const [mainDirection, setMainDirection] = useState('Right')\r\n    let direction = mainDirection\r\n    const changeDirection = (e) => {\r\n        let snakeArr = JSON.parse(snake)\r\n        // eslint-disable-next-line default-case\r\n        switch (e.code) {\r\n            case 'KeyW':\r\n                if (snakeArr[snakeArr.length - 1][1] <= snakeArr[snakeArr.length - 2][1]) direction = 'Up'\r\n                break;\r\n            case 'KeyA':\r\n                if (snakeArr[snakeArr.length - 1][0] <= snakeArr[snakeArr.length - 2][0]) direction = 'Left'\r\n                break;\r\n            case 'KeyD':\r\n                if (snakeArr[snakeArr.length - 2][0] <= snakeArr[snakeArr.length - 1][0]) direction = 'Right'\r\n                break;\r\n            case 'KeyS':\r\n                if (snakeArr[snakeArr.length - 2][1] <= snakeArr[snakeArr.length - 1][1]) direction = 'Down'\r\n                break;\r\n            case 'ArrowUp':\r\n                if (snakeArr[snakeArr.length - 1][1] <= snakeArr[snakeArr.length - 2][1]) direction = 'Up'\r\n                break;\r\n            case 'ArrowLeft':\r\n                if (snakeArr[snakeArr.length - 1][0] <= snakeArr[snakeArr.length - 2][0]) direction = 'Left'\r\n                break;\r\n            case 'ArrowRight':\r\n                if (snakeArr[snakeArr.length - 2][0] <= snakeArr[snakeArr.length - 1][0]) direction = 'Right'\r\n                break;\r\n            case 'ArrowDown':\r\n                if (snakeArr[snakeArr.length - 2][1] <= snakeArr[snakeArr.length - 1][1]) direction = 'Down'\r\n                break;\r\n        }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    useEffect(() => {\r\n        !pause && !GameOver && document.addEventListener('keydown', changeDirection)\r\n        !pause && !GameOver && new Promise(() => setTimeout(() => {\r\n            let directNow = direction || mainDirection\r\n            let snakeArr = JSON.parse(snake)\r\n            let lastElem = snakeArr[snakeArr.length - 1]\r\n            // eslint-disable-next-line default-case\r\n            switch (directNow) {\r\n                case 'Up':\r\n                    snakeArr.push([lastElem[0], lastElem[1] - 1])\r\n                    break\r\n                case 'Left':\r\n                    snakeArr.push([lastElem[0] - 1, lastElem[1]])\r\n                    break\r\n                case 'Right':\r\n                    snakeArr.push([lastElem[0] + 1, lastElem[1]])\r\n                    break\r\n                case 'Down':\r\n                    snakeArr.push([lastElem[0], lastElem[1] + 1])\r\n                    break\r\n            }\r\n            let appleAte = false\r\n            let crash = false\r\n            snakeArr.forEach((el, i, arr) => {\r\n                if (el[0] === JSON.parse(apple)[0] && el[1] === JSON.parse(apple)[1]) appleAte = true\r\n                if (el[0] === arr[arr.length - 1][0] && el[1] === arr[arr.length - 1][1] && i !== arr.length - 1)\r\n                    crash = true\r\n            })\r\n            if (snakeArr[snakeArr.length - 1][0] < 1\r\n                || snakeArr[snakeArr.length - 1][1] < 1\r\n                || snakeArr[snakeArr.length - 1][0] > 37\r\n                || snakeArr[snakeArr.length - 1][1] > 23)\r\n                crash = true\r\n            !appleAte && snakeArr.shift()\r\n            appleAte && setScore(prev => prev + 1)\r\n            if (crash) {\r\n                setGameOver(true)\r\n                setPause(true)\r\n            }\r\n            appleAte && setApple(window.snake?.apple || JSON.stringify([Math.floor(Math.random() * 36 + 1), Math.floor(Math.random() * 22 + 1)]))\r\n            snakeArr = JSON.stringify(snakeArr)\r\n            setMainDirection(direction)\r\n            setSnake(snakeArr)\r\n            document.removeEventListener('keydown', changeDirection)\r\n        }, window.snake?.timedelay || 120/(0.01 * score**1.5 + 1)))\r\n    }, [snake, pause])\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='App' style={{cursor: (GameOver || pause) && 'pointer'}} onClick={() => {\r\n                if (GameOver) {\r\n                    setMainDirection('Right')\r\n                    setGameOver(false)\r\n                    setScore(window.snake?.score || 0)\r\n                    setSnake(window.snake?.snake || JSON.stringify([[1, 12], [2, 12], [3, 12]]))\r\n                    setApple(window.snake?.apple || JSON.stringify([Math.floor(Math.random() * 33 + 4), Math.floor(Math.random() * 22 + 1)]))\r\n                } else {\r\n                    pause && setPause(false)\r\n                }\r\n\r\n            }}>\r\n                {\r\n                    pause && !GameOver\r\n                        ?\r\n                        <div style={{height: '100%', color: 'white'}}>Click to start</div>\r\n                        :\r\n                        GameOver ? <div className='GameOver' style={{\r\n                                alignContent: 'center',\r\n                                display: 'flex',\r\n                                justifyContent: 'center',\r\n                                fontSize: '195px',\r\n                                color: 'rgb(152,0,2)'\r\n                            }}>GameOver</div>\r\n                            :\r\n                            <>\r\n                                {JSON.parse(snake).map(el =>\r\n                                    <SnakeCell key={el} x={el[0]} y={el[1]}/>\r\n                                )}\r\n                                <div className='apple' style={{\r\n                                    marginTop: (JSON.parse(apple)[1] - 1) * 20 + 'px',\r\n                                    marginLeft: (JSON.parse(apple)[0] - 1) * 20 + 'px'\r\n                                }}>\r\n                                    <div className='bg-apple'/>\r\n                                </div>\r\n                            </>\r\n                }\r\n\r\n            </div>\r\n            <div style={{position: 'absolute', fontSize: '40px', right: 40, top: 'calc(100vh / 2)'}}>\r\n                {score}\r\n            </div>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}